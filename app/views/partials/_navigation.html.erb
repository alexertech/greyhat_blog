<div class="row g-0" data-controller="navigation-bookmarks mobile-navigation">
  <div class="col">
    <!-- Mobile Navigation -->
    <div class="d-md-none">
      <div class="mobile-nav-header bg-dark rounded-top p-3 d-flex justify-content-between align-items-center">
        <span class="text-white fw-bold">Greyhat</span>
        <div class="d-flex align-items-center gap-2">
          <!-- Dark Mode Toggle for Mobile -->
          <div data-controller="dark-mode">
            <button data-dark-mode-target="toggle"
                    data-action="click->dark-mode#toggle"
                    class="btn btn-outline-light btn-sm theme-toggle"
                    style="border-radius: 20px; padding: 6px 12px; position: relative; overflow: hidden; transition: all 0.3s ease; min-width: 50px; height: 32px;"
                    aria-label="Toggle dark mode">
              <div class="theme-toggle-slider" style="
                position: absolute;
                top: 2px;
                left: 2px;
                width: 24px;
                height: 24px;
                background: linear-gradient(45deg, #ffd700, #ffed4a);
                border-radius: 50%;
                transition: all 0.3s ease;
                box-shadow: 0 2px 4px rgba(0,0,0,0.2);
                display: flex;
                align-items: center;
                justify-content: center;
              ">
                <i data-dark-mode-target="icon" class="fas fa-sun" style="font-size: 10px; color: #333;"></i>
              </div>
            </button>
          </div>
          
          <button data-mobile-navigation-target="toggle" 
                  data-action="click->mobile-navigation#toggle"
                  class="mobile-nav-toggle btn btn-link text-white p-0"
                  aria-label="Toggle navigation"
                  aria-expanded="false">
            <span class="navbar-toggler-icon">
              <i class="fas fa-bars"></i>
            </span>
          </button>
        </div>
      </div>
      
      <!-- Mobile Menu Overlay -->
      <div data-mobile-navigation-target="overlay" class="mobile-nav-overlay"></div>
      
      <!-- Mobile Menu -->
      <div data-mobile-navigation-target="menu" class="mobile-nav-menu bg-dark">
        <!-- Mobile Search -->
        <div class="mobile-search p-3 border-bottom border-secondary">
          <%= form_with url: search_path, method: :get, local: true do |form| %>
            <div class="input-group">
              <%= form.text_field :q, 
                  placeholder: "Buscar artículos...", 
                  class: "form-control mobile-search-input",
                  value: params[:q] %>
              <button class="btn btn-outline-light mobile-search-button" type="submit">
                <i class="fas fa-search"></i>
              </button>
            </div>
          <% end %>
        </div>
        
        <div class="mobile-nav-items">
          <a href="/index" 
             data-action="click->mobile-navigation#close"
             class="mobile-nav-item <%= current_page?('/index') ? 'active' : '' %>">
            <i class="fas fa-home me-3"></i> 
            <span>Inicio</span>
          </a>
          <a href="/acerca" 
             data-action="click->mobile-navigation#close"
             class="mobile-nav-item <%= current_page?('/acerca') ? 'active' : '' %>">
            <i class="fas fa-user me-3"></i> 
            <span>Acerca de</span>
          </a>
          <a href="/articulos" 
             data-action="click->mobile-navigation#close"
             class="mobile-nav-item <%= current_page?('/articulos') || controller.controller_name == 'posts' ? 'active' : '' %>">
            <i class="fas fa-newspaper me-3"></i> 
            <span>Artículos</span>
          </a>
          <a href="/newsletter" 
             data-action="click->mobile-navigation#close"
             class="mobile-nav-item <%= current_page?('/newsletter') ? 'active' : '' %>">
            <i class="fas fa-envelope me-3"></i> 
            <span>Newsletter</span>
          </a>
          <a href="/guardados" 
             data-navigation-bookmarks-target="bookmarksLink"
             data-action="click->mobile-navigation#close"
             class="mobile-nav-item d-none <%= current_page?('/guardados') ? 'active' : '' %>">
            <i class="fas fa-bookmark me-3"></i> 
            <span>Guardados</span>
          </a>
          <a href="/servicios" 
             data-action="click->mobile-navigation#close"
             class="mobile-nav-item <%= current_page?('/servicios') ? 'active' : '' %>">
            <i class="fas fa-cogs me-3"></i> 
            <span>Servicios</span>
          </a>
          <% if user_signed_in? %>
            <a href="/dashboard" 
               data-action="click->mobile-navigation#close"
               class="mobile-nav-item">
              <i class="fas fa-tachometer-alt me-3"></i> 
              <span>Dashboard</span>
            </a>
          <% end %>
        </div>
      </div>
    </div>

    <!-- Desktop Navigation -->
    <div class="d-none d-md-block modern-navbar">
      <div class="navbar-container">
        <a href="/index" class="nav-item <%= current_page?('/index') ? 'active' : '' %>">
          <i class="fas fa-home nav-icon"></i>
          <span class="nav-text">Inicio</span>
        </a>
        <a href="/acerca" class="nav-item <%= current_page?('/acerca') ? 'active' : '' %>">
          <i class="fas fa-user nav-icon"></i>
          <span class="nav-text">Acerca de</span>
        </a>
        <a href="/articulos" class="nav-item <%= current_page?('/articulos') || controller.controller_name == 'posts' ? 'active' : '' %>">
          <i class="fas fa-newspaper nav-icon"></i>
          <span class="nav-text">Artículos</span>
        </a>
        <a href="/newsletter" class="nav-item <%= current_page?('/newsletter') ? 'active' : '' %>">
          <i class="fas fa-envelope nav-icon"></i>
          <span class="nav-text">Newsletter</span>
        </a>
        <a href="/guardados" 
           data-navigation-bookmarks-target="bookmarksLink"
           class="nav-item d-none <%= current_page?('/guardados') ? 'active' : '' %>">
          <i class="fas fa-bookmark nav-icon"></i>
          <span class="nav-text">Guardados</span>
        </a>
        <a href="/servicios" class="nav-item <%= current_page?('/servicios') ? 'active' : '' %>">
          <i class="fas fa-cogs nav-icon"></i>
          <span class="nav-text">Servicios</span>
        </a>
        <% if user_signed_in? %>
          <a href="/dashboard" class="nav-item">
            <i class="fas fa-tachometer-alt nav-icon"></i>
            <span class="nav-text">Dashboard</span>
          </a>
        <% end %>
      </div>
    </div>
  </div>
</div>