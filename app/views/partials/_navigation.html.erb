<div class="row g-0" data-controller="navigation-bookmarks mobile-navigation">
  <div class="col">
    <!-- Mobile Navigation -->
    <div class="d-md-none">
      <div class="mobile-nav-header bg-dark rounded-top p-3 d-flex justify-content-between align-items-center">
        <span class="text-white fw-bold">Greyhat</span>
        <div class="d-flex align-items-center gap-2">
          <!-- Dark Mode Toggle for Mobile -->
          <div data-controller="dark-mode">
            <button data-dark-mode-target="toggle"
                    data-action="click->dark-mode#toggle"
                    class="btn btn-link text-white p-0"
                    aria-label="Toggle dark mode">
              <i data-dark-mode-target="icon" class="fas fa-moon"></i>
            </button>
          </div>
          
          <button data-mobile-navigation-target="toggle" 
                  data-action="click->mobile-navigation#toggle"
                  class="mobile-nav-toggle btn btn-link text-white p-0"
                  aria-label="Toggle navigation"
                  aria-expanded="false">
            <span class="navbar-toggler-icon">
              <i class="fas fa-bars"></i>
            </span>
          </button>
        </div>
      </div>
      
      <!-- Mobile Menu Overlay -->
      <div data-mobile-navigation-target="overlay" class="mobile-nav-overlay"></div>
      
      <!-- Mobile Menu -->
      <div data-mobile-navigation-target="menu" class="mobile-nav-menu bg-dark">
        <!-- Mobile Search -->
        <div class="mobile-search p-3 border-bottom border-secondary">
          <%= form_with url: search_path, method: :get, local: true do |form| %>
            <div class="input-group">
              <%= form.text_field :q, 
                  placeholder: "Buscar artículos...", 
                  class: "form-control",
                  value: params[:q] %>
              <button class="btn btn-outline-light" type="submit">
                <i class="fas fa-search"></i>
              </button>
            </div>
          <% end %>
        </div>
        
        <div class="mobile-nav-items">
          <a href="/index" 
             data-action="click->mobile-navigation#close"
             class="mobile-nav-item py-3 px-4 text-decoration-none text-white d-block <%= current_page?('/index') ? 'active' : '' %>">
            <i class="fas fa-home me-2"></i> Inicio
          </a>
          <a href="/acerca" 
             data-action="click->mobile-navigation#close"
             class="mobile-nav-item py-3 px-4 text-decoration-none text-white d-block <%= current_page?('/acerca') ? 'active' : '' %>">
            <i class="fas fa-user me-2"></i> Acerca de
          </a>
          <a href="/articulos" 
             data-action="click->mobile-navigation#close"
             class="mobile-nav-item py-3 px-4 text-decoration-none text-white d-block <%= current_page?('/articulos') || controller.controller_name == 'posts' ? 'active' : '' %>">
            <i class="fas fa-newspaper me-2"></i> Artículos
          </a>
          <a href="/guardados" 
             data-navigation-bookmarks-target="bookmarksLink"
             data-action="click->mobile-navigation#close"
             class="mobile-nav-item py-3 px-4 text-decoration-none text-white d-none <%= current_page?('/guardados') ? 'active' : '' %>">
            <i class="fas fa-bookmark me-2"></i> Guardados
          </a>
          <a href="/servicios" 
             data-action="click->mobile-navigation#close"
             class="mobile-nav-item py-3 px-4 text-decoration-none text-white d-block <%= current_page?('/servicios') ? 'active' : '' %>">
            <i class="fas fa-cogs me-2"></i> Servicios
          </a>
          <% if user_signed_in? %>
            <a href="/dashboard" 
               data-action="click->mobile-navigation#close"
               class="mobile-nav-item py-3 px-4 text-decoration-none text-white d-block">
              <i class="fas fa-tachometer-alt me-2"></i> Dashboard
            </a>
          <% end %>
        </div>
      </div>
    </div>

    <!-- Desktop Navigation -->
    <div class="d-none d-md-block bg-dark rounded-top">
      <div class="d-flex flex-row">
        <a href="/index" class="main-nav-item flex-fill py-3 text-center text-decoration-none text-white <%= current_page?('/index') ? 'active' : '' %>">Inicio</a>
        <a href="/acerca" class="main-nav-item flex-fill py-3 text-center text-decoration-none text-white <%= current_page?('/acerca') ? 'active' : '' %>">Acerca de</a>
        <a href="/articulos" class="main-nav-item flex-fill py-3 text-center text-decoration-none text-white <%= current_page?('/articulos') || controller.controller_name == 'posts' ? 'active' : '' %>">Artículos</a>
        <a href="/guardados" 
           data-navigation-bookmarks-target="bookmarksLink"
           class="main-nav-item flex-fill py-3 text-center text-decoration-none text-white d-none <%= current_page?('/guardados') ? 'active' : '' %>">
          <i class="fas fa-bookmark"></i> Guardados
        </a>
        <a href="/servicios" class="main-nav-item flex-fill py-3 text-center text-decoration-none text-white <%= current_page?('/servicios') ? 'active' : '' %>">Servicios</a>
        <% if user_signed_in? %>
          <a href="/dashboard" class="main-nav-item flex-fill py-3 text-center text-decoration-none text-white">Dashboard</a>
        <% end %>
      </div>
      
      <!-- Search Bar and Dark Mode Toggle -->
      <div class="search-bar-container px-3 pb-3 d-flex gap-2 align-items-center">
        <%= form_with url: search_path, method: :get, local: true, class: "flex-grow-1" do |form| %>
          <div class="input-group">
            <%= form.text_field :q, 
                placeholder: "Buscar artículos...", 
                class: "form-control form-control-sm",
                value: params[:q] %>
            <button class="btn btn-outline-light btn-sm" type="submit">
              <i class="fas fa-search"></i>
            </button>
          </div>
        <% end %>
        
        <!-- Dark Mode Toggle for Desktop -->
        <div data-controller="dark-mode">
          <button data-dark-mode-target="toggle"
                  data-action="click->dark-mode#toggle"
                  class="btn btn-outline-light btn-sm"
                  aria-label="Toggle dark mode">
            <i data-dark-mode-target="icon" class="fas fa-moon"></i>
          </button>
        </div>
      </div>
    </div>
  </div>
</div>