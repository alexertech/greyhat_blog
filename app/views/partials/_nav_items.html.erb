<%#
  Navigation items partial - DRY navigation links

  Usage:
    render 'partials/nav_items', variant: :desktop
    render 'partials/nav_items', variant: :mobile
    render 'partials/nav_items', variant: :header
%>

<%
  nav_items = [
    { path: '/index', icon: 'home', label: 'Inicio' },
    { path: '/articulos', icon: 'newspaper', label: 'ArtÃ­culos', match_controller: 'posts' },
    { path: '/newsletter', icon: 'envelope', label: 'Newsletter' },
    { path: '/servicios', icon: 'cogs', label: 'Servicios' },
    { path: '/acerca', icon: 'user', label: 'Acerca de' }
  ]

  nav_items << { path: '/dashboard', icon: 'tachometer-alt', label: 'Dashboard', auth: true } if user_signed_in?

  variant = local_assigns[:variant] || :desktop
%>

<% nav_items.each do |item| %>
  <% next if item[:auth] && !user_signed_in? %>

  <%
    is_active = current_page?(item[:path]) ||
                (item[:match_controller] && controller.controller_name == item[:match_controller])
  %>

  <% case variant %>
  <% when :header %>
    <a href="<%= item[:path] %>" class="header-nav__link <%= 'active' if is_active %>">
      <%= item[:label] %>
    </a>
  <% when :mobile %>
    <a href="<%= item[:path] %>"
       class="mobile-nav-item <%= 'active' if is_active %>"
       data-action="click->mobile-navigation#close">
      <i class="fas fa-<%= item[:icon] %> me-3"></i>
      <span><%= item[:label] %></span>
    </a>
  <% else %>
    <a href="<%= item[:path] %>" class="nav-item <%= 'active' if is_active %>">
      <i class="fas fa-<%= item[:icon] %> nav-icon"></i>
      <span class="nav-text"><%= item[:label] %></span>
    </a>
  <% end %>
<% end %>
